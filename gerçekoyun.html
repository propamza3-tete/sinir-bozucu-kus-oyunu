<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Uçan Kuş Oyunu</title>
<style>
  body { margin:0; background:#70c5ce; overflow:hidden; }
  canvas { display:block; margin:auto; background:#70c5ce; }
</style>
</head>
<body>
<canvas id="game" width="400" height="512"></canvas>
<script>
const cvs = document.getElementById("game");
const ctx = cvs.getContext("2d");

// Kuş
let bird = {
  x: 50, y: 150, w: 34, h: 24,
  gravity: 0.25, lift: -4.6, velocity: 0
};

// Borular
let pipes = [];
let frame = 0;
let score = 0;
let gameOver = false;

function reset() {
  bird.y = 150;
  bird.velocity = 0;
  pipes = [];
  score = 0;
  frame = 0;
  gameOver = false;
}

function drawBird() {
  ctx.fillStyle = "blue";
  ctx.beginPath();
  ctx.arc(bird.x, bird.y, 12, 0, Math.PI*2);
  ctx.fill();
}

function drawPipes() {
  ctx.fillStyle = "green";
  pipes.forEach(p => {
    ctx.fillRect(p.x, 0, 50, p.top);
    ctx.fillRect(p.x, p.top + 100, 50, cvs.height - p.top - 100);
  });
}

function drawScore() {
  ctx.fillStyle = "white";
  ctx.font = "24px sans-serif";
  ctx.fillText("Skor: " + score, 10, 30);
}

function update() {
  if (gameOver) return;

  bird.velocity += bird.gravity;
  bird.y += bird.velocity;

  // Zıplama
  if (bird.y + bird.h > cvs.height || bird.y < 0) gameOver = true;

  // Borular
  if (frame % 90 === 0) {
    let top = Math.random() * 200 + 50;
    pipes.push({x: cvs.width, top});
  }

  pipes.forEach(p => {
    p.x -= 2;
    // Çarpışma
    if (bird.x + bird.w > p.x && bird.x < p.x + 50 &&
        (bird.y < p.top || bird.y + bird.h > p.top + 100)) {
      gameOver = true;
    }
    if (p.x + 50 === Math.floor(bird.x)) score++;
  });

  pipes = pipes.filter(p => p.x + 50 > 0);
  frame++;
}

function draw() {
  ctx.fillStyle = "#70c5ce";
  ctx.fillRect(0,0,cvs.width,cvs.height);
  drawPipes();
  drawBird();
  drawScore();

  if (gameOver) {
    ctx.fillStyle = "red";
    ctx.font = "36px sans-serif";
    ctx.fillText("OYUN BİTTİ", 100, 250);
    ctx.font = "20px sans-serif";
    ctx.fillText("Yeniden başlamak için tıklayın", 70, 280);
  }
}

function loop() {
  update();
  draw();
  requestAnimationFrame(loop);
}

cvs.addEventListener("mousedown", () => {
  if (gameOver) reset();
  else bird.velocity = bird.lift;
});

loop();
</script>
</body>
</html>
